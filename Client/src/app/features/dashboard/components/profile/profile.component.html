<div class="profile-container">
  <div class="profile-header">
    <h1 class="text-2xl font-bold mb-4">User Profile</h1>
    <button mat-raised-button color="primary" (click)="toggleEditMode()">
      {{ isEditMode ? 'Cancel' : 'Edit Profile' }}
    </button>
  </div>

  @if (!isEditMode) {
    <mat-card class="profile-card">
      <div class="profile-info">
        <div class="profile-avatar">
          @if (currentUser?.profilePictureUrl) {
            <img [src]="currentUser.profilePictureUrl" alt="Profile picture" class="avatar-img">
          } @else {
            <div class="avatar-placeholder">
              <mat-icon class="avatar-icon">person</mat-icon>
            </div>
          }
        </div>
        
        <div class="profile-details">
          <h2 class="text-xl font-semibold">{{ currentUser?.username || 'Username' }}</h2>
          <p class="text-gray-600">{{ currentUser?.email || 'Email' }}</p>
          
          @if (currentUser?.bio) {
            <div class="bio-section mt-4">
              <h3 class="text-lg font-medium mb-2">Bio</h3>
              <p class="text-gray-700">{{ currentUser.bio }}</p>
            </div>
          }
        </div>
      </div>
    </mat-card>
    
    <app-user-stats [userId]="currentUser?.id"></app-user-stats>
  } @else {
    <app-profile-edit [user]="currentUser" (editComplete)="toggleEditMode()"></app-profile-edit>
  }
</div>
