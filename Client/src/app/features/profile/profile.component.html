<div class="profile-container">
  <div class="profile-card-container">
    <p-card styleClass="profile-card">
      <ng-template pTemplate="header">
        <div class="profile-header">
          <h1 class="text-center font-bold text-2xl">KubeStream</h1>
          <h2 class="text-center text-lg">User Profile</h2>
        </div>
      </ng-template>

      <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
        <!-- Error message -->
        <p-message *ngIf="profileError" severity="error" [text]="errorMessage" styleClass="w-full mb-4"></p-message>

        <!-- Grid layout for form fields -->
        <div class="grid">
          <!-- Username field -->
          <div class="col-12 md:col-6 field mb-3">
            <div class="flex align-items-center mb-1">
              <label for="username" class="ml-2">Username</label>
              <i class="pi pi-user ml-2"></i>
            </div>
            <input id="username" type="text" pInputText formControlName="username" class="w-full"
              placeholder="Enter your username"
              [ngClass]="{'ng-invalid ng-dirty': f['username'].touched && f['username'].invalid}" />
            <small class="p-error block mt-1" *ngIf="f['username'].touched && f['username'].errors?.['required']">
              Username is required
            </small>
            <small class="p-error block mt-1" *ngIf="f['username'].touched && f['username'].errors?.['minlength']">
              Username must be at least 3 characters
            </small>
          </div>

          <!-- Email field -->
          <div class="col-12 md:col-6 field mb-3">
            <div class="flex align-items-center mb-1">
              <label for="email" class="ml-2">Email</label>
              <i class="pi pi-envelope ml-2"></i>
            </div>
            <input id="email" type="email" pInputText formControlName="email" class="w-full"
              placeholder="Enter your email"
              [ngClass]="{'ng-invalid ng-dirty': f['email'].touched && f['email'].invalid}" />
            <small class="p-error block mt-1" *ngIf="f['email'].touched && f['email'].errors?.['required']">
              Email is required
            </small>
            <small class="p-error block mt-1" *ngIf="f['email'].touched && f['email'].errors?.['email']">
              Invalid email format
            </small>
          </div>

          <!-- First Name field -->
          <div class="col-12 md:col-6 field mb-3">
            <div class="flex align-items-center mb-1">
              <label for="firstName" class="ml-2">First Name</label>
              <i class="pi pi-user ml-2"></i>
            </div>
            <input id="firstName" type="text" pInputText formControlName="firstName" class="w-full"
              placeholder="Enter your first name"
              [ngClass]="{'ng-invalid ng-dirty': f['firstName'].touched && f['firstName'].invalid}" />
            <small class="p-error block mt-1" *ngIf="f['firstName'].touched && f['firstName'].errors?.['required']">
              First name is required
            </small>
          </div>

          <!-- Last Name field -->
          <div class="col-12 md:col-6 field mb-3">
            <div class="flex align-items-center mb-1">
              <label for="lastName" class="ml-2">Last Name</label>
              <i class="pi pi-user ml-2"></i>
            </div>
            <input id="lastName" type="text" pInputText formControlName="lastName" class="w-full"
              placeholder="Enter your last name"
              [ngClass]="{'ng-invalid ng-dirty': f['lastName'].touched && f['lastName'].invalid}" />
            <small class="p-error block mt-1" *ngIf="f['lastName'].touched && f['lastName'].errors?.['required']">
              Last name is required
            </small>
          </div>

          <!-- Password fields -->
          <div class="col-12 md:col-6 field mb-3">
            <div class="flex align-items-center mb-1">
              <label for="password" class="ml-2">New Password</label>
              <i class="pi pi-lock ml-2"></i>
            </div>
            <p-password id="password" formControlName="password" [toggleMask]="true" [feedback]="true"
               styleClass="w-full" inputStyleClass="w-full" placeholder="Enter new password"
              [ngClass]="{'ng-invalid ng-dirty': f['password'].touched && f['password'].invalid}"></p-password>
             <small class="p-error block mt-1" *ngIf="f['password'].touched && f['password'].errors?.['minlength']">
              Password must be at least 8 characters
            </small>
          </div>

          <div class="col-12 md:col-6 field mb-3">
            <div class="flex align-items-center mb-1">
              <label for="confirmPassword" class="ml-2">Confirm New Password</label>
              <i class="pi pi-lock ml-2"></i>
            </div>
            <p-password id="confirmPassword" formControlName="confirmPassword" [toggleMask]="true" [feedback]="false"
               styleClass="w-full" inputStyleClass="w-full" placeholder="Confirm new password"
              [ngClass]="{'ng-invalid ng-dirty': f['confirmPassword'].touched && f['confirmPassword'].invalid}"></p-password>
            <small class="p-error block mt-1"
              *ngIf="profileForm.errors?.['passwordMismatch'] && f['confirmPassword'].touched">
              Passwords do not match
            </small>
          </div>
           

          <!-- Save button -->
          <div class="col-12 field mt-3">
            <p-button type="submit" label="Save Profile" icon="pi pi-save" styleClass="w-full"
              [loading]="loading"></p-button>
          </div>
        </div>
      </form>
    </p-card>
  </div>
</div>
